{"ast":null,"code":"import React from\"react\";import{supabase}from\"./supabaseClient\";import{motion,AnimatePresence}from\"framer-motion\";import{locationData as defaultLocationData}from\"./MapNpcsQuests\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const syncInitialData=async()=>{const{data:existing,error}=await supabase.from(\"locations\").select(\"name, x, y\");if(error){console.error(\"Error checking existing locations:\",error);return;}const existingNames=existing.map(loc=>loc.name);for(const loc of defaultLocationData){const existingLoc=existing.find(e=>e.name===loc.name);const payload={name:loc.name,description:loc.description,quests:JSON.stringify(loc.quests),npcs:JSON.stringify(loc.npcs),x:(existingLoc===null||existingLoc===void 0?void 0:existingLoc.x)||loc.x||\"50%\",y:(existingLoc===null||existingLoc===void 0?void 0:existingLoc.y)||loc.y||\"50%\"};if(!existingNames.includes(loc.name)){const{error:insertError}=await supabase.from(\"locations\").insert([payload]);if(insertError){console.error(`Error inserting ${loc.name}:`,insertError);}else{console.log(`Inserted: ${loc.name}`);}}else{const{error:updateError}=await supabase.from(\"locations\").update(payload).eq(\"name\",loc.name);if(updateError){console.error(`Error updating ${loc.name}:`,updateError);}else{console.log(`Updated: ${loc.name}`);}}}};export const Map=()=>{var _selected$quests,_selected$npcs;const[locations,setLocations]=React.useState([]);const[selected,setSelected]=React.useState(null);const mapRef=React.useRef(null);React.useEffect(()=>{const safeParse=str=>{try{return JSON.parse(str);}catch{return[];}};const fetchLocations=async()=>{const{data,error}=await supabase.from(\"locations\").select();if(!error&&data){setLocations(data.map(loc=>({...loc,quests:safeParse(loc.quests),npcs:safeParse(loc.npcs)})));}};syncInitialData().then(fetchLocations);},[]);const handleMapClick=async e=>{if(!mapRef.current)return;const rect=mapRef.current.getBoundingClientRect();const x=`${(e.clientX-rect.left)/rect.width*100}%`;const y=`${(e.clientY-rect.top)/rect.height*100}%`;const name=prompt(\"Enter location name:\");if(!name)return;const description=prompt(\"Enter location description:\",\"\")||\"\";const{data,error}=await supabase.from(\"locations\").insert([{name,description,x,y,quests:JSON.stringify([]),npcs:JSON.stringify([])}]);if(!error&&data){setLocations(prev=>[...prev,{...data[0],quests:[],npcs:[]}]);}};const updateLocation=async updated=>{const{error}=await supabase.from(\"locations\").update({name:updated.name,description:updated.description,quests:JSON.stringify(updated.quests),npcs:JSON.stringify(updated.npcs)}).eq(\"id\",updated.id);if(!error){setSelected(updated);setLocations(prev=>prev.map(loc=>loc.id===updated.id?updated:loc));}};const handleDelete=async()=>{if(!selected)return;const{error}=await supabase.from(\"locations\").delete().eq(\"id\",selected.id);if(!error){setLocations(prev=>prev.filter(loc=>loc.id!==selected.id));setSelected(null);}};const handleAddQuest=async()=>{const title=prompt(\"Quest title:\");if(!title)return;const status=prompt(\"Quest status:\",\"Active\")||\"Active\";const description=prompt(\"Quest description:\",\"\")||\"\";await updateLocation({...selected,quests:[...selected.quests,{title,status,description}]});};const handleEditQuest=async i=>{const title=prompt(\"New quest title:\",selected.quests[i].title);if(!title)return;const status=prompt(\"New status:\",selected.quests[i].status);const description=prompt(\"New description:\",selected.quests[i].description);const updatedQuests=[...selected.quests];updatedQuests[i]={title,status,description};await updateLocation({...selected,quests:updatedQuests});};const handleDeleteQuest=async i=>{const updatedQuests=[...selected.quests];updatedQuests.splice(i,1);await updateLocation({...selected,quests:updatedQuests});};const handleAddNPC=async()=>{const name=prompt(\"NPC name:\");if(!name)return;const backstory=prompt(\"NPC backstory:\",\"\")||\"\";await updateLocation({...selected,npcs:[...selected.npcs,{name,backstory}]});};const handleEditNPC=async i=>{const name=prompt(\"New NPC name:\",selected.npcs[i].name);if(!name)return;const backstory=prompt(\"New NPC backstory:\",selected.npcs[i].backstory);const updatedNPCs=[...selected.npcs];updatedNPCs[i]={name,backstory};await updateLocation({...selected,npcs:updatedNPCs});};const handleDeleteNPC=async i=>{const updatedNPCs=[...selected.npcs];updatedNPCs.splice(i,1);await updateLocation({...selected,npcs:updatedNPCs});};const handleEditLocationDetails=async()=>{const name=prompt(\"New location name:\",selected.name);if(!name)return;const description=prompt(\"New description:\",selected.description);await updateLocation({...selected,name,description});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-10 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:\"Interactive Map\"}),/*#__PURE__*/_jsxs(\"div\",{ref:mapRef,onClick:handleMapClick,className:\"relative w-full max-w-4xl mx-auto border rounded-xl shadow-lg overflow-hidden cursor-crosshair\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/Wmap.jpg\",alt:\"Campaign Map\",className:\"w-full\"}),locations.map(loc=>/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();// ← Prevents triggering the map click\nsetSelected(loc);},className:\"absolute bg-Interactive rounded-md w-5 h-5 hover:scale-110 transition\",style:{top:loc.y,left:loc.x,transform:\"translate(-50%, -50%)\"},title:loc.name},loc.id))]}),/*#__PURE__*/_jsx(AnimatePresence,{children:selected&&/*#__PURE__*/_jsxs(motion.aside,{initial:{x:\"100%\"},animate:{x:0},exit:{x:\"100%\"},transition:{type:\"spring\",stiffness:300,damping:30},className:\"fixed right-0 top-0 h-full w-80 bg-white shadow-2xl p-6 z-50 overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-2\",children:selected.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700 mb-4\",children:selected.description}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEditLocationDetails,className:\"mb-4 text-sm px-2 py-1 rounded bg-gray-500 text-white hover:bg-gray-600\",children:\"Edit Location Details\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold\",children:\"Quests\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"mb-2 list-disc list-inside text-sm\",children:((_selected$quests=selected.quests)===null||_selected$quests===void 0?void 0:_selected$quests.length)>0?selected.quests.map((q,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:q.title}),\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"(\",q.status,\")\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs italic\",children:q.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs mt-1 flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditQuest(i),className:\"text-blue-600\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteQuest(i),className:\"text-red-600\",children:\"Delete\"})]})]},i)):/*#__PURE__*/_jsx(\"li\",{className:\"text-gray-400\",children:\"No quests\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddQuest,className:\"mb-4 text-sm px-2 py-1 rounded bg-blue-500 text-white hover:bg-blue-600\",children:\"+ Add Quest\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold\",children:\"NPCs\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"mb-2 list-disc list-inside text-sm\",children:((_selected$npcs=selected.npcs)===null||_selected$npcs===void 0?void 0:_selected$npcs.length)>0?selected.npcs.map((n,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:n.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs italic\",children:n.backstory}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs mt-1 flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditNPC(i),className:\"text-blue-600\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteNPC(i),className:\"text-red-600\",children:\"Delete\"})]})]},i)):/*#__PURE__*/_jsx(\"li\",{className:\"text-gray-400\",children:\"No known NPCs\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddNPC,className:\"mb-4 text-sm px-2 py-1 rounded bg-purple-500 text-white hover:bg-purple-600\",children:\"+ Add NPC\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelected(null),className:\"px-3 py-1 text-sm bg-teal-500 text-white rounded hover:bg-teal-600\",children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,className:\"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700\",children:\"Delete Marker\"})]})]})})]});};","map":{"version":3,"names":["React","supabase","motion","AnimatePresence","locationData","defaultLocationData","jsx","_jsx","jsxs","_jsxs","syncInitialData","data","existing","error","from","select","console","existingNames","map","loc","name","existingLoc","find","e","payload","description","quests","JSON","stringify","npcs","x","y","includes","insertError","insert","log","updateError","update","eq","Map","_selected$quests","_selected$npcs","locations","setLocations","useState","selected","setSelected","mapRef","useRef","useEffect","safeParse","str","parse","fetchLocations","then","handleMapClick","current","rect","getBoundingClientRect","clientX","left","width","clientY","top","height","prompt","prev","updateLocation","updated","id","handleDelete","delete","filter","handleAddQuest","title","status","handleEditQuest","i","updatedQuests","handleDeleteQuest","splice","handleAddNPC","backstory","handleEditNPC","updatedNPCs","handleDeleteNPC","handleEditLocationDetails","className","children","ref","onClick","src","alt","stopPropagation","style","transform","aside","initial","animate","exit","transition","type","stiffness","damping","length","q","n"],"sources":["C:/dnd-campaign-site/src/Map.js"],"sourcesContent":["import React from \"react\";\r\nimport { supabase } from \"./supabaseClient\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { locationData as defaultLocationData } from \"./MapNpcsQuests\";\r\n\r\nconst syncInitialData = async () => {\r\n  const { data: existing, error } = await supabase.from(\"locations\").select(\"name, x, y\");\r\n\r\n  if (error) {\r\n    console.error(\"Error checking existing locations:\", error);\r\n    return;\r\n  }\r\n\r\n  const existingNames = existing.map((loc) => loc.name);\r\n\r\n  for (const loc of defaultLocationData) {\r\n    const existingLoc = existing.find((e) => e.name === loc.name);\r\n\r\n    const payload = {\r\n      name: loc.name,\r\n      description: loc.description,\r\n      quests: JSON.stringify(loc.quests),\r\n      npcs: JSON.stringify(loc.npcs),\r\n      x: existingLoc?.x || loc.x || \"50%\",\r\n      y: existingLoc?.y || loc.y || \"50%\",\r\n    };\r\n\r\n    if (!existingNames.includes(loc.name)) {\r\n      const { error: insertError } = await supabase.from(\"locations\").insert([payload]);\r\n      if (insertError) {\r\n        console.error(`Error inserting ${loc.name}:`, insertError);\r\n      } else {\r\n        console.log(`Inserted: ${loc.name}`);\r\n      }\r\n    } else {\r\n      const { error: updateError } = await supabase.from(\"locations\").update(payload).eq(\"name\", loc.name);\r\n      if (updateError) {\r\n        console.error(`Error updating ${loc.name}:`, updateError);\r\n      } else {\r\n        console.log(`Updated: ${loc.name}`);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport const Map = () => {\r\n  const [locations, setLocations] = React.useState([]);\r\n  const [selected, setSelected] = React.useState(null);\r\n  const mapRef = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    const safeParse = (str) => {\r\n      try {\r\n        return JSON.parse(str);\r\n      } catch {\r\n        return [];\r\n      }\r\n    };\r\n\r\n    const fetchLocations = async () => {\r\n      const { data, error } = await supabase.from(\"locations\").select();\r\n      if (!error && data) {\r\n        setLocations(\r\n          data.map((loc) => ({\r\n            ...loc,\r\n            quests: safeParse(loc.quests),\r\n            npcs: safeParse(loc.npcs),\r\n          }))\r\n        );\r\n      }\r\n    };\r\n\r\n    syncInitialData().then(fetchLocations);\r\n  }, []);\r\n\r\n  const handleMapClick = async (e) => {\r\n    if (!mapRef.current) return;\r\n    const rect = mapRef.current.getBoundingClientRect();\r\n    const x = `${((e.clientX - rect.left) / rect.width) * 100}%`;\r\n    const y = `${((e.clientY - rect.top) / rect.height) * 100}%`;\r\n\r\n    const name = prompt(\"Enter location name:\");\r\n    if (!name) return;\r\n    const description = prompt(\"Enter location description:\", \"\") || \"\";\r\n\r\n    const { data, error } = await supabase.from(\"locations\").insert([\r\n      {\r\n        name,\r\n        description,\r\n        x,\r\n        y,\r\n        quests: JSON.stringify([]),\r\n        npcs: JSON.stringify([]),\r\n      },\r\n    ]);\r\n\r\n    if (!error && data) {\r\n      setLocations((prev) => [...prev, { ...data[0], quests: [], npcs: [] }]);\r\n    }\r\n  };\r\n\r\n  const updateLocation = async (updated) => {\r\n    const { error } = await supabase\r\n      .from(\"locations\")\r\n      .update({\r\n        name: updated.name,\r\n        description: updated.description,\r\n        quests: JSON.stringify(updated.quests),\r\n        npcs: JSON.stringify(updated.npcs),\r\n      })\r\n      .eq(\"id\", updated.id);\r\n\r\n    if (!error) {\r\n      setSelected(updated);\r\n      setLocations((prev) => prev.map((loc) => (loc.id === updated.id ? updated : loc)));\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!selected) return;\r\n\r\n    const { error } = await supabase.from(\"locations\").delete().eq(\"id\", selected.id);\r\n    if (!error) {\r\n      setLocations((prev) => prev.filter((loc) => loc.id !== selected.id));\r\n      setSelected(null);\r\n    }\r\n  };\r\n\r\n  const handleAddQuest = async () => {\r\n    const title = prompt(\"Quest title:\");\r\n    if (!title) return;\r\n    const status = prompt(\"Quest status:\", \"Active\") || \"Active\";\r\n    const description = prompt(\"Quest description:\", \"\") || \"\";\r\n\r\n    await updateLocation({\r\n      ...selected,\r\n      quests: [...selected.quests, { title, status, description }],\r\n    });\r\n  };\r\n\r\n  const handleEditQuest = async (i) => {\r\n    const title = prompt(\"New quest title:\", selected.quests[i].title);\r\n    if (!title) return;\r\n    const status = prompt(\"New status:\", selected.quests[i].status);\r\n    const description = prompt(\"New description:\", selected.quests[i].description);\r\n\r\n    const updatedQuests = [...selected.quests];\r\n    updatedQuests[i] = { title, status, description };\r\n\r\n    await updateLocation({ ...selected, quests: updatedQuests });\r\n  };\r\n\r\n  const handleDeleteQuest = async (i) => {\r\n    const updatedQuests = [...selected.quests];\r\n    updatedQuests.splice(i, 1);\r\n    await updateLocation({ ...selected, quests: updatedQuests });\r\n  };\r\n\r\n  const handleAddNPC = async () => {\r\n    const name = prompt(\"NPC name:\");\r\n    if (!name) return;\r\n    const backstory = prompt(\"NPC backstory:\", \"\") || \"\";\r\n\r\n    await updateLocation({\r\n      ...selected,\r\n      npcs: [...selected.npcs, { name, backstory }],\r\n    });\r\n  };\r\n\r\n  const handleEditNPC = async (i) => {\r\n    const name = prompt(\"New NPC name:\", selected.npcs[i].name);\r\n    if (!name) return;\r\n    const backstory = prompt(\"New NPC backstory:\", selected.npcs[i].backstory);\r\n\r\n    const updatedNPCs = [...selected.npcs];\r\n    updatedNPCs[i] = { name, backstory };\r\n\r\n    await updateLocation({ ...selected, npcs: updatedNPCs });\r\n  };\r\n\r\n  const handleDeleteNPC = async (i) => {\r\n    const updatedNPCs = [...selected.npcs];\r\n    updatedNPCs.splice(i, 1);\r\n    await updateLocation({ ...selected, npcs: updatedNPCs });\r\n  };\r\n\r\n  const handleEditLocationDetails = async () => {\r\n    const name = prompt(\"New location name:\", selected.name);\r\n    if (!name) return;\r\n    const description = prompt(\"New description:\", selected.description);\r\n\r\n    await updateLocation({ ...selected, name, description });\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-10 relative overflow-hidden\">\r\n      <h2 className=\"text-2xl font-semibold mb-4\">Interactive Map</h2>\r\n\r\n      <div\r\n        ref={mapRef}\r\n        onClick={handleMapClick}\r\n        className=\"relative w-full max-w-4xl mx-auto border rounded-xl shadow-lg overflow-hidden cursor-crosshair\"\r\n      >\r\n        <img src=\"/Wmap.jpg\" alt=\"Campaign Map\" className=\"w-full\" />\r\n\r\n        {locations.map((loc) => (\r\n          <button\r\n  key={loc.id}\r\n  onClick={(e) => {\r\n    e.stopPropagation(); // ← Prevents triggering the map click\r\n    setSelected(loc);\r\n  }}\r\n  className=\"absolute bg-Interactive rounded-md w-5 h-5 hover:scale-110 transition\"\r\n  style={{ top: loc.y, left: loc.x, transform: \"translate(-50%, -50%)\" }}\r\n  title={loc.name}\r\n/>\r\n\r\n        ))}\r\n      </div>\r\n\r\n      <AnimatePresence>\r\n        {selected && (\r\n          <motion.aside\r\n            initial={{ x: \"100%\" }}\r\n            animate={{ x: 0 }}\r\n            exit={{ x: \"100%\" }}\r\n            transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\r\n            className=\"fixed right-0 top-0 h-full w-80 bg-white shadow-2xl p-6 z-50 overflow-y-auto\"\r\n          >\r\n            <h3 className=\"text-xl font-bold mb-2\">{selected.name}</h3>\r\n            <p className=\"text-sm text-gray-700 mb-4\">{selected.description}</p>\r\n            <button\r\n              onClick={handleEditLocationDetails}\r\n              className=\"mb-4 text-sm px-2 py-1 rounded bg-gray-500 text-white hover:bg-gray-600\"\r\n            >\r\n              Edit Location Details\r\n            </button>\r\n\r\n            <h4 className=\"text-md font-semibold\">Quests</h4>\r\n            <ul className=\"mb-2 list-disc list-inside text-sm\">\r\n              {selected.quests?.length > 0 ? (\r\n                selected.quests.map((q, i) => (\r\n                  <li key={i}>\r\n                    <strong>{q.title}</strong> <span className=\"text-xs text-gray-500\">({q.status})</span>\r\n                    <p className=\"text-xs italic\">{q.description}</p>\r\n                    <div className=\"text-xs mt-1 flex gap-1\">\r\n                      <button onClick={() => handleEditQuest(i)} className=\"text-blue-600\">Edit</button>\r\n                      <button onClick={() => handleDeleteQuest(i)} className=\"text-red-600\">Delete</button>\r\n                    </div>\r\n                  </li>\r\n                ))\r\n              ) : (\r\n                <li className=\"text-gray-400\">No quests</li>\r\n              )}\r\n            </ul>\r\n            <button\r\n              onClick={handleAddQuest}\r\n              className=\"mb-4 text-sm px-2 py-1 rounded bg-blue-500 text-white hover:bg-blue-600\"\r\n            >\r\n              + Add Quest\r\n            </button>\r\n\r\n            <h4 className=\"text-md font-semibold\">NPCs</h4>\r\n            <ul className=\"mb-2 list-disc list-inside text-sm\">\r\n              {selected.npcs?.length > 0 ? (\r\n                selected.npcs.map((n, i) => (\r\n                  <li key={i}>\r\n                    <strong>{n.name}</strong>\r\n                    <p className=\"text-xs italic\">{n.backstory}</p>\r\n                    <div className=\"text-xs mt-1 flex gap-1\">\r\n                      <button onClick={() => handleEditNPC(i)} className=\"text-blue-600\">Edit</button>\r\n                      <button onClick={() => handleDeleteNPC(i)} className=\"text-red-600\">Delete</button>\r\n                    </div>\r\n                  </li>\r\n                ))\r\n              ) : (\r\n                <li className=\"text-gray-400\">No known NPCs</li>\r\n              )}\r\n            </ul>\r\n            <button\r\n              onClick={handleAddNPC}\r\n              className=\"mb-4 text-sm px-2 py-1 rounded bg-purple-500 text-white hover:bg-purple-600\"\r\n            >\r\n              + Add NPC\r\n            </button>\r\n\r\n            <div className=\"mt-6 flex gap-2\">\r\n              <button\r\n                onClick={() => setSelected(null)}\r\n                className=\"px-3 py-1 text-sm bg-teal-500 text-white rounded hover:bg-teal-600\"\r\n              >\r\n                Close\r\n              </button>\r\n              <button\r\n                onClick={handleDelete}\r\n                className=\"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700\"\r\n              >\r\n                Delete Marker\r\n              </button>\r\n            </div>\r\n          </motion.aside>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}