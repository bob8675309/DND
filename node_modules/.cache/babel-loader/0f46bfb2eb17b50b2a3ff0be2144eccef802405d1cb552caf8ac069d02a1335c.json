{"ast":null,"code":"var _jsxFileName = \"C:\\\\dnd-campaign-site\\\\DND\\\\src\\\\pages\\\\AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminDashboard() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [role, setRole] = useState(null);\n  const [users, setUsers] = useState([]);\n  const [item, setItem] = useState({\n    name: '',\n    type: '',\n    rarity: '',\n    description: '',\n    weight: '',\n    cost: ''\n  });\n  const [selectedUser, setSelectedUser] = useState('');\n  useEffect(() => {\n    const fetchAdminInfo = async () => {\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      setUser(user);\n      if (user) {\n        const {\n          data: profile\n        } = await supabase.from('user_profiles').select('role').eq('id', user.id).single();\n        setRole(profile === null || profile === void 0 ? void 0 : profile.role);\n      }\n      const {\n        data: allUsers\n      } = await supabase.from('user_profiles').select('id, role');\n      setUsers(allUsers || []);\n    };\n    fetchAdminInfo();\n  }, []);\n  const handleChange = e => {\n    setItem({\n      ...item,\n      [e.target.name]: e.target.value\n    });\n  };\n  const assignItem = async () => {\n    if (!selectedUser) return alert('Select a player to assign this item to.');\n    const {\n      error\n    } = await supabase.from('inventory_items').insert([{\n      user_id: selectedUser,\n      item_id: `admin-${Date.now()}`,\n      item_name: item.name,\n      item_type: item.type,\n      item_rarity: item.rarity,\n      item_description: item.description,\n      item_weight: item.weight,\n      item_cost: item.cost\n    }]);\n    if (error) {\n      console.error('Insert error:', error);\n      alert('Error assigning item.');\n    } else {\n      alert('âœ… Item assigned successfully!');\n      setItem({\n        name: '',\n        type: '',\n        rarity: '',\n        description: '',\n        weight: '',\n        cost: ''\n      });\n    }\n  };\n  if (!user || role !== 'admin') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 text-red-500\",\n      children: \"Access denied. Admins only.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto p-6 space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold\",\n      children: \"\\uD83E\\uDDD9 Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block mb-1 font-semibold\",\n        children: \"Assign to Player:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedUser,\n        onChange: e => setSelectedUser(e.target.value),\n        className: \"w-full p-2 border rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Select a Player --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), users.map(u => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: u.id,\n          children: [u.id, \" (\", u.role, \")\"]\n        }, u.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: ['name', 'type', 'rarity', 'description', 'weight', 'cost'].map(field => /*#__PURE__*/_jsxDEV(\"input\", {\n        name: field,\n        placeholder: field,\n        value: item[field],\n        onChange: handleChange,\n        className: \"w-full p-2 border rounded\"\n      }, field, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: assignItem,\n      className: \"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700\",\n      children: \"\\u2795 Create and Assign Item\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminDashboard, \"VIVWI9UcUhdj/LoYPQjlqSVYYt0=\");\n_c = AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useState","supabase","jsxDEV","_jsxDEV","AdminDashboard","_s","user","setUser","role","setRole","users","setUsers","item","setItem","name","type","rarity","description","weight","cost","selectedUser","setSelectedUser","fetchAdminInfo","data","auth","getUser","profile","from","select","eq","id","single","allUsers","handleChange","e","target","value","assignItem","alert","error","insert","user_id","item_id","Date","now","item_name","item_type","item_rarity","item_description","item_weight","item_cost","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","map","u","field","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/dnd-campaign-site/DND/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { supabase } from '../supabaseClient';\r\n\r\nexport default function AdminDashboard() {\r\n  const [user, setUser] = useState(null);\r\n  const [role, setRole] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [item, setItem] = useState({\r\n    name: '',\r\n    type: '',\r\n    rarity: '',\r\n    description: '',\r\n    weight: '',\r\n    cost: ''\r\n  });\r\n  const [selectedUser, setSelectedUser] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchAdminInfo = async () => {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      setUser(user);\r\n\r\n      if (user) {\r\n        const { data: profile } = await supabase\r\n          .from('user_profiles')\r\n          .select('role')\r\n          .eq('id', user.id)\r\n          .single();\r\n\r\n        setRole(profile?.role);\r\n      }\r\n\r\n      const { data: allUsers } = await supabase.from('user_profiles').select('id, role');\r\n      setUsers(allUsers || []);\r\n    };\r\n\r\n    fetchAdminInfo();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setItem({ ...item, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const assignItem = async () => {\r\n    if (!selectedUser) return alert('Select a player to assign this item to.');\r\n\r\n    const { error } = await supabase.from('inventory_items').insert([{\r\n      user_id: selectedUser,\r\n      item_id: `admin-${Date.now()}`,\r\n      item_name: item.name,\r\n      item_type: item.type,\r\n      item_rarity: item.rarity,\r\n      item_description: item.description,\r\n      item_weight: item.weight,\r\n      item_cost: item.cost\r\n    }]);\r\n\r\n    if (error) {\r\n      console.error('Insert error:', error);\r\n      alert('Error assigning item.');\r\n    } else {\r\n      alert('âœ… Item assigned successfully!');\r\n      setItem({ name: '', type: '', rarity: '', description: '', weight: '', cost: '' });\r\n    }\r\n  };\r\n\r\n  if (!user || role !== 'admin') {\r\n    return <div className=\"p-6 text-red-500\">Access denied. Admins only.</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto p-6 space-y-6\">\r\n      <h2 className=\"text-2xl font-bold\">ðŸ§™ Admin Dashboard</h2>\r\n\r\n      <div>\r\n        <label className=\"block mb-1 font-semibold\">Assign to Player:</label>\r\n        <select\r\n          value={selectedUser}\r\n          onChange={(e) => setSelectedUser(e.target.value)}\r\n          className=\"w-full p-2 border rounded\"\r\n        >\r\n          <option value=\"\">-- Select a Player --</option>\r\n          {users.map(u => (\r\n            <option key={u.id} value={u.id}>\r\n              {u.id} ({u.role})\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        {['name', 'type', 'rarity', 'description', 'weight', 'cost'].map(field => (\r\n          <input\r\n            key={field}\r\n            name={field}\r\n            placeholder={field}\r\n            value={item[field]}\r\n            onChange={handleChange}\r\n            className=\"w-full p-2 border rounded\"\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      <button\r\n        onClick={assignItem}\r\n        className=\"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700\"\r\n      >\r\n        âž• Create and Assign Item\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}